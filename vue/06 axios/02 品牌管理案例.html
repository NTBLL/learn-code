<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.css">
    <style>
        .container {
            text-align: left;
            margin-top: 50px;
        }

        .form-group {
            margin-right: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <form class="form-inline">
        <div class="form-group">
            <label for="exampleInputName2">品牌</label>
            <input type="text" class="form-control" id="exampleInputName2" v-model="brand">
        </div>
        <div class="form-group">
            <label for="exampleInputEmail2">描述</label>
            <input type="email" class="form-control" @keyup.enter.stop="add" id="exampleInputEmail2" v-model="des">
        </div>
        <button type="submit" class="btn btn-info" @click.prevent="add">添加</button>
    </form>
    <table class="table table-bordered table-striped" style="margin-top: 20px;">
        <tr>
            <th>序号</th>
            <th>品牌</th>
            <th>描述</th>
            <th>日期</th>
            <th>操作</th>
        </tr>
        <tr v-if="list.length == 0">
            <td colspan="5">没有更多的信息了</td>
        </tr>
        <tr v-for="(item,index) in list" :key="item.id" :class="index%2==0?'info':'warning'">
            <td>{{index+1}}</td>
            <td>{{item.brand}}</td>
            <td>{{item.des}}</td>
            <td>{{item.date | dateFilter}}</td>
            <td><a href="#" @click.prevent="remove(item.id)">删除</a></td>
        </tr>
    </table>
</div>


<script src="../vue.js"></script>
<script src="../moment.js"></script>
<script>
    const vm = new Vue({
        el: ".container",
        data: {
            list: [
                {id: 1, brand: "宝马", des: "宝马不是你想买就买", date: new Date()},
                {id: 2, brand: "大本", des: "大本不是你想买就买", date: new Date()},
                {id: 3, brand: "老爷车", des: "老爷车不是你想买就买", date: new Date()}
            ],
            index: 4,
            brand: "",
            des: ""
        },
        methods: {
            add: function () {

                let item = {
                    id: this.index++,
                    brand: this.brand,
                    des: this.des,
                    date: new Date()
                };
                this.list.push(item);
                this.brand = "";
                this.des = "";
            },
            remove: function (id) {
                this.list.findIndex((item, index) => {
                    if (item.id == id) {
                        console.log(item, index);
                        this.list.splice(index, 1);
                    }
                })
            }
        },
        filters: {
            dateFilter: (date, pattern = "YYYY-MM-DD HH:mm:ss") => {
                return moment(date).format(pattern);
            }
        }
    });
</script>
</body>
</html>